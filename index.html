<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width='device-width', initial-scale=1.0" />
    <title>Chatbot generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
    <script>
      $.fn.drag = function (selector) {
        var container = $(this);
        var draggedItem;
        var itemPositions = [];

        container.on("mousedown", ".discussionpoint", function (e) {
          itemPositions = container.find(".discussionpoint").map(function () {
            return $(this).position();
          });

          console.log(itemPositions);

          draggedItem = $(this);
          clone = draggedItem.clone();

          clone.addClass("clone");
          draggedItem.addClass("dragging");

          var position = draggedItem.position();

          clone.offsetX = e.originalEvent.clientX - position.left;
          clone.offsetY = e.originalEvent.clientY - position.top;

          clone.css({
            position: "fixed",
            left: position.left,
            top: position.top,
          });

          container.append(clone);

          $(window).bind("mousemove", moveDraggedItem);
          $(window).bind("mouseup", dropDraggedItem);
          $(container).bind("mouseover", ".discussionpoint", moveItems);
          container.find(".discussionpoint").each(function (index) {
            $(this).css({
              position: "fixed",
              top: itemPositions[index].top,
              left: itemPositions[index].left,
            });
          });
        });

        function moveItems(e) {
          var target = $(e.target);
          if (target.hasClass("discussionpoint")) {
            if (draggedItem.prev()[0] == target[0]) {
              target.insertAfter(draggedItem);
            } else if (draggedItem.next()[0] == target[0]) {
              target.insertBefore(draggedItem);
            } else {
              if (draggedItem.index() > target.index())
                draggedItem.insertBefore(target);
              else draggedItem.insertAfter(target);
            }

            container.find(".discussionpoint").each(function (index) {
              $(this).css({
                top: itemPositions[index].top,
                left: itemPositions[index].left,
              });
            });
          }
        }

        function dropDraggedItem(e) {
          $(window).unbind("mousemove mouseup");
          draggedItem.removeClass("dragging");
          $(container).unbind("mouseover");
          clone.remove();
          container.find(".discussionpoint").css({
            position: "",
            top: "",
            left: "",
          });
        }

        function moveDraggedItem(e) {
          clone.css({
            left: e.originalEvent.clientX - clone.offsetX,
            top: e.originalEvent.clientY - clone.offsetY,
          });
        }
      };

      $(function () {
        $("#chatlog").drag(".discussionpoint");
      });
    </script>
  </head>
  <body
    class="font-sans tracking-tightest md:tracking-normal md:text-lg font-medium"
  >
    <div
      class="flex flex-col w-full px-5 lg:px-2 lg:w-1/2 mx-auto text-center pt-8 pb-4"
      id="wrapper"
    >
      <h1
        class="pb-8 text-4xl sm:text-6xl font-extrabold leading-none tracking-tighter text-gray-900 lg:text-8xl"
      >
        Build-a-<span
          class="px-2 text-white bg-blue-600 tracking-widest rounded dark:bg-blue-400"
          >bot</span
        >
      </h1>
      <div class="border md:px-0 px-2 md:px-0 border-gray-400 rounded mt-2">
        <label for="" class="w-full mt-5">Use case</label>
        <div class="flex flex-row justify-center mx-auto">
          <button
            id="lead"
            class="rounded p-2 hover:bg-blue-400 hover:text-white transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white md:mx-5 my-1"
            name="useCase"
          >
            Lead generation</button
          ><button
            id="support"
            class="transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white md:mx-5 my-1"
            name="useCase"
          >
            Customer support
          </button>
          <button
            id="faq"
            class="transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white md:mx-5 my-1"
            name="useCase"
          >
            Frequently asked questions
          </button>
          <button
            id="recruit"
            class="transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white md:mx-5 my-1"
            name="useCase"
          >
            Recruitment
          </button>
        </div>
      </div>

      <div class="border px-2 md:px-0 border-gray-400 my-5 rounded">
        <label for="" class="w-full mt-5">Tone</label>
        <div class="flex flex-row justify-center mx-auto">
          <button
            id="funny"
            class="transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white mx-5 my-1"
            name="tone"
          >
            Funny</button
          ><button
            id="helpful"
            class="transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white mx-5 my-1"
            name="tone"
          >
            Helpful
          </button>
          <button
            id="professional"
            class="transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white mx-5 my-1"
            name="tone"
          >
            Professional
          </button>
        </div>
      </div>

      <div class="border px-2 md:px-0 border-gray-400 rounded">
        <label for="" class="w-full mt-5">Bot type</label>
        <div class="flex flex-row justify-center mx-auto">
          <button
            class="transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white mx-5 my-1"
            id="inpage"
            name="bot"
          >
            InPage</button
          ><button
            class="transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white mx-5 my-1"
            id="chatbot"
            name="bot"
          >
            Chat
          </button>
        </div>
      </div>
      <div class="border px-2 md:px-0 border-gray-400 rounded my-5">
        <div class="mt-5 md:w-1/2 mx-auto text-center flex flex-col">
          <label for="industry">Industry</label>
          <input
            type="text"
            id="industry"
            placeholder="Enter industry name"
            class="mx-auto block w-2/3 my-1 p-4 text-center text-gray-900 border border-gray-300 rounded-lg bg-gray-50 sm:text-md focus:ring-blue-500 focus:border-blue-500 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500 rounded border mb-5"
          />
          <label for="industry">Additional information</label>
          <input
            type="text"
            id="add"
            placeholder="Enter additional information"
            class="mx-auto block w-2/3 my-1 p-4 text-center text-gray-900 border border-gray-300 rounded-lg bg-gray-50 sm:text-md focus:ring-blue-500 focus:border-blue-500 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500 rounded border mb-5"
          />
        </div>
      </div>

      <div
        class="border px-2 md:px-0 py-5 border-gray-400 rounded"
        id="generatebox"
      >
        <input
          type="text"
          class="mx-auto w-2/3 block p-4 text-center text-gray-900 border border-gray-300 rounded-lg bg-gray-50 sm:text-md focus:ring-blue-500 focus:border-blue-500 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500 rounded border"
          placeholder="Additional information / chat"
          id="message"
        />
        <button
          class="w-1/2 mx-auto transition duration-300 ease-in-out rounded p-2 hover:bg-blue-400 hover:text-white mx-5 my-6"
          id="submit"
        >
          Generate
        </button>
        <div class="" id="chatlog"></div>
      </div>
    </div>
    <script type="module" src="app.js"></script>
  </body>
</html>
